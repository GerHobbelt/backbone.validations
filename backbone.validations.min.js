(function(b){function n(c){var e=c.hasOverridenError,d=c.attributes,c=c.options,a=!1,f={},g,b,j,k;for(b in this._attributeValidators)j=d[b],(k=this._attributeValidators[b])&&(g=k.call(this,j,e,c)),g&&(a=!0,f[b]=g);return a?f:!1}function p(c,e,d,a){switch(d){case "presence":if(!a)throw"presence should only be given true";d=h.presence;break;case "length":var d=h.length,f=a.min,a=a.max,b=_.isNull(f)||_.isUndefined(f),o=_.isNull(a)||_.isUndefined(a);if(b&&o)throw"need to set either a max or min length";
d=_.bind(d,this,f,a);break;case "custom":if(!_.isString(a))throw"Custom error callback names must be a string";d=c[a];if(!_.isFunction(d))throw"Custom validator '"+a+"' is not a function on the model";break;default:throw"Improper validation type '"+d+"'";}return d=_.bind(d,c,e)}function q(c,e,d){var a=[],f,b;for(f in d)b=d[f],a.push(p(c,e,f,b));return function(c,d,b){for(var f,g=[],i=0,h=a.length;i<h;i++)f=a[i],(f=f.call(this,c))&&(_.isArray(f)?g=g.concat(f):g.push(f));return g.length?(d||this.trigger("error:"+
e,this,g,b),g):!1}}function r(c,e){return s.call(this,{attributes:c,options:e,hasOverridenError:!!e.error},e)}var h={presence:function(c,e){var d=this.get(c),d=_.isUndefined(d),a=_.isUndefined(e);return _.isNull(e)||e===""||a&&d?"presence":!1},length:function(c,e,d,a){if(typeof a==="string"){var f;c>0&&(f=a.length<c);var b;e>0&&(b=a.length>e);c=[];f&&c.push("under_min");b&&c.push("over_max");return c.length?c:!1}}},s=b.Model.prototype._performValidation;b.Validations={};var l=function(){},m=b.Model;
b.Validations.Model=function(c,e,d){var a;a=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return c.apply(this,arguments)};l.prototype=c.prototype;a.prototype=new l;e&&_.extend(a.prototype,e);d&&_.extend(a,d);a.prototype.constructor=a;a.__super__=c.prototype;return a}(b.Model,{constructor:function(){if(typeof this.validate==="object"&&this.validate!==null&&!this.constructor.prototype._attributeValidators){var c=this.constructor.prototype,e=this.validate,d,a={},b;for(b in e)d=e[b],a[b]=
q(this,b,d);c._attributeValidators=a;this.constructor.prototype.validate=n;this.constructor.prototype._performValidation=r}m.apply(this,arguments)}},b.Model);b.Model=b.Validations.Model;b.Validations.noConflict=function(){b.Model=m}})(Backbone);